<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Location Autocomplete</title>
</head>
<body>
<h1>Location Search</h1>
<input type="text" id="location-input" placeholder="Enter location" onkeyup="fetchSuggestions()" autocomplete="off">
<ul id="suggestions"></ul>

<script>
  function fetchSuggestions() {
    const query = document.getElementById('location-input').value;
    if (query.length < 3) return; // Minimum 3 characters before searching

    fetch(`/autocomplete?query=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(data => {
              const suggestions = document.getElementById('suggestions');
              suggestions.innerHTML = "";
              data.forEach(item => {
                const li = document.createElement('li');
                li.innerText = item.display_name; // display_name will show the full address
                suggestions.appendChild(li);
              });
            })
            .catch(error => console.error('Error fetching suggestions:', error));
  }
</script>
</body>
</html>
